# GitHub Copilot 電卓シェルスクリプトプロジェクト用指示書

## プロジェクト概要
基本的な四則演算を行うコマンドライン電卓（`calc.sh`）を含むシンプルなシェルスクリプトプロジェクトです。日本の開発慣行に従い、バイリンガルドキュメントを採用しています。

## 中核アーキテクチャ
- **単一実行ファイル**: `calc.sh` - スタンドアロンbash電卓スクリプト
- **使用パターン**: `sh ./calc.sh <演算子> <数値1> <数値2>`
- **対応演算**: `+`, `-`, `*`, `/`
- **エラーハンドリング**: 全ての失敗ケースで統一されたエラー出力（"error"）

## 主要パターンと規約

### エラーハンドリング戦略
全てのエラー条件で文字列"error"を返し、終了コード1で終了：
- 無効な引数数
- 数値以外の入力
- 未対応の演算子
- ゼロ除算

コードからの例:
```bash
if [ $# -ne 3 ]; then
    echo "error"
    exit 1
fi
```

### 入力検証パターン
`is_number()`関数を使用した正規表現ベースの数値検証：
```bash
is_number() {
    if [[ $1 =~ ^-?[0-9]+$ ]]; then
        return 0
    else
        return 1
    fi
}
```

### 演算子処理
一貫した結果処理による演算子ディスパッチでの`case`文使用：
```bash
case $operator in
    "+")
        result=$((num1 + num2))
        echo $result
        ;;
```

## 開発ワークフロー
- **テスト**: 特定のテストケースによる手動実行
  - 加算: `sh ./calc.sh + 1 2` → `3`
  - 乗算: `sh ./calc.sh \* 15 20` → `300` (シェルエスケープに注意)
  - エラーケース: `sh ./calc.sh hoge 15 20` → `error`
- **実行権限**: `chmod +x calc.sh`で実行権限を確保

## シェル固有の考慮事項
- **算術演算**: 整数計算にbash算術展開`$(( ))`を使用
- **シェルエスケープ**: 乗算演算子`*`はターミナルでエスケープが必要: `\*`
- **終了コード**: 全エラー条件でゼロ以外の終了コード(1)

## プロジェクト拡張時の注意点
- 一貫したエラーメッセージ（"error"のみ）を維持
- 既存パターンに従い`case`文に新しい演算子を追加
- 整数演算のみを保持（浮動小数点なし）
- シンプルさのため単一ファイル構成を維持
- 特殊文字のシェルエスケープ考慮を含むテスト
